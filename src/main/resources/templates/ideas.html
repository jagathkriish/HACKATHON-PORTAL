<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"   xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  	<meta id="_csrf" name="_csrf" th:content="${_csrf.token}"/>
	<meta id="_csrf_header" name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>Capgemini Hackathon Hub</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.min.css" >    
    <!-- Main Style -->
    <link rel="stylesheet" type="text/css" href="./assets/css/main.css">
    <!-- Responsive Style -->
    <link rel="stylesheet" type="text/css" href="./assets/css/responsive.css">
    <!-- Fonts -->
    <link rel="stylesheet" type="text/css" href="./assets/fonts/font-awesome.min.css">
    <!-- Icon -->
    <link rel="stylesheet" type="text/css" href="./assets/fonts/simple-line-icons.css"> 
    <!-- Slicknav -->
    <link rel="stylesheet" type="text/css" href="./assets/css/slicknav.css">
    <!-- Nivo Lightbox -->
    <link rel="stylesheet" type="text/css" href="./assets/css/nivo-lightbox.css" > 
    <!-- Animate -->
    <link rel="stylesheet" type="text/css" href="./assets/css/animate.css">
    <!-- Owl carousel -->
    <link rel="stylesheet" type="text/css" href="./assets/css/owl.carousel.css">   
	<link rel="stylesheet" href="./assets/css/jquery.rateyo.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <style type="text/css">
    
    .overlay {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: rgb(0,0,0);
    background-color: rgba(0,0,0, 0.9);
    overflow-x: hidden;
    transition: 0.5s;
    direction: ltr;
}

.overlay-content {
    position: relative;
    top: 25%;
    width: 100%;
    text-align: center;
    margin-top: 30px;
}

.overlay a {
    padding: 8px;
    text-decoration: none;
    font-size: 36px;
    color: blue;
    display: block;
    transition: 2.3s;
}

.overlay a:hover, .overlay a:focus {
    color: #f1f1f1;
}

.overlay .closebtn {
    position: absolute;
    top: 20px;
    right: 45px;
    font-size: 60px;
}


 .cmtClass{
    width: 50em; 
    border: 1px solid #000000;
    word-wrap: break-word;
    border-color: white;
}

    </style>
    
  </head>
  <body>

    <!-- Header Area wrapper Starts -->
    <header id="header-wrap">
      <!-- Roof area Starts -->
      <div id="roof" class="hidden-xs">
          <div class="container">
            <div class="col-md-6 col-sm-6">
              <div class="info-bar-address">
                 <i class="icon-location-pin"></i> Hyderabad, TS, INDIA
              </div>
            </div>
            <div class="col-md-6 col-sm-6">
              <!-- Quick Contacts Starts -->
              <div class="quick-contacts">
                  <span><i class="icon-phone"></i> 040 2312 6000</span>
                  <!-- <span><i class="icon-envelope"></i><a href="#"><span class="__cf_email__" data-cfemail="61040c00080d21060c00080d4f020e0c">[email&#160;protected]</span><script data-cfhash='f9e31' type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script></a></span> -->
                  <span><i class="icon-envelope"></i><a href="#">hr@capgemini.com</a></span>
                  Welcome: <span sec:authentication="name">USER</span>
              </div>
              <!-- Quick Contacts End -->
            </div>
          </div>
      </div>
      <!-- Roof area End -->

      <!-- Nav Menu Section Start -->
      <div class="navigation-menu">
        <nav class="navbar navbar-default navbar-event" role="navigation" data-spy="affix" data-offset-top="20">
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header col-md-2">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index"><img src="./assets/img/capgemini_logo.png" alt="" style="padding-top: 5px;
    width: 270px;"></a>
            </div>

            <div class="collapse navbar-collapse" id="navbar">
              <ul class="nav navbar-nav navbar-right">
                <li><a href="index">Home</a></li>
                <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" >Pages <span class="caret"></span></a>
                   <ul class="dropdown-menu">
                    <li><a href="about">About Us</a></li>
                    <li><a href="gallery">Gallery</a></li>
                    <li><a href="submitIdea">Submit Idea</a></li>
                    <li><a href="sponsors">Sponsors</a></li>
                    <li><a href="single-post">Single Post</a></li>
                  </ul>
                </li>                
                <li><a href="schedule">Schedule</a></li>              
                <li><a href="speakers">Speakers</a></li>                
                <li class="active"><a href="ideaList">Ideas</a></li>             
                <li class="animated bounceIn"><a href="submitIdea">SUBMIT IDEA</a></li>                
                <li><a href="contact">Contact</a></li>  
                <li><a href="javascript: document.logoutForm.submit()">Logout</a></li>          
              </ul>
            </div><!-- /navbar-collapse -->
          </div><!-- /container -->

          <!-- Mobile Menu Start -->
          <ul class="wpb-mobile-menu">
            <li><a href="index">Home</a></li>
            <li><a href="#">Pages</a>
               <ul class="dropdown">
                <li><a href="about">About Us</a></li>
                <li><a href="gallery">Gallery</a></li>
                <li><a href="submitIdea">Submit Idea</a></li>
                <li><a href="sponsors">Sponsors</a></li>
                <li><a href="single-post">Single Post</a></li>
              </ul>
            </li>                
            <li><a href="schedule">Schedule</a></li>              
            <li><a href="speakers">Speakers</a></li>                
            <li class="active"><a href="blog">Blog</a></li>             
            <li><a href="submitIdea">SUBMIT IDEA</a></li>                
            <li><a href="contact">Contact</a></li> 
           </ul>
          <!-- Mobile Menu End -->

        </nav>
      </div>
      <!-- Nav Menu Section End -->

    </header>
    <!-- Header Area wrapper End -->

    <!-- Page Header Start -->
    <div class="page-header" id="headerdiv">      
      <div class="container"> 
        <div class="page-header-inner">         
          <ol class="breadcrumb wow fadeInDown" data-wow-delay="300ms">
            <li><a href="index">Home</a></li>
            <li class="page">Ideas</li>
          </ol>
          <h1 class="page-title wow fadeInRight" data-wow-delay="300ms">
            ideas
          </h1>
        </div>
      </div>
    </div>
    <!-- Page Header End-->

    <!-- Blog Section Start -->
    <section id="content" class="section">
		<div class="container" >
        <div class="row">
          <!-- Start Blog Posts -->
          <div class="col-md-8">
            <!-- Start Post -->
            <div id="postdiv">
                        <!-- End Post -->  
			</div>
			<form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
            	<input type="submit" value="Sign Out"/>
        	</form>
<div id="detailsNav" class="overlay" style="background-color: lightgreen;display: none;overflow:scroll">
	<a href="javascript:void(0)" class="closebtn" onclick="closeDetails()">&times;</a>
	<div style="margin-left: 3%;margin-top: 3%;float: left">			  
	<table>
			<tr style="width: 100%"><td style="width: 35%;" align="left">ID :</td><td style="width: 65%;" align="left"> <div id="setideaid"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Idea Type :</td><td  style="width: 65%;" align="left"><div id="setItype"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Problem :</td><td  style="width: 65%;" align="left"> <div id="setprob"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Industry :</td><td style="width: 65%;" align="left"> <div id="setindustry"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Area Of Function :</td><td  style="width: 65%;" align="left"> <div id="setareaoffunc"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Technology :</td><td  style="width: 65%;" align="left"> <div id="settech"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Solution Title :</td><td style="width: 65%;" align="left"> <div id="setsoltitle"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Solution Description :</td><td style="width: 65%;" align="left"> <div id="setsoldesc"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">BU Benifit :</td><td style="width: 65%;" align="left"> <div id="setbubenift"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">BU Investment :</td><td style="width: 65%;" align="left"> <div id="setbuinvest"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">BU Income :</td><td style="width: 65%;" align="left"> <div id="setbuincome"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Status :</td><td style="width: 65%;" align="left"> <div id="setstatus"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Rating :</td><td style="width: 65%;" align="left"> <div id="setrating"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Cap Name :</td><td style="width: 65%;" align="left"> <div id="setcapname"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Cap Id :</td><td style="width: 65%;" align="left"> <div id="setcapid"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Cap Email :</td><td style="width: 65%;" align="left"> <div id="setcapmail"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Phone :</td><td style="width: 65%;" align="left"> <div id="setphone"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">BU Service :</td><td style="width: 65%;" align="left"> <div id="setbuservice"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Project :</td><td style="width: 65%;" align="left"> <div id="setproject"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Location :</td><td style="width: 65%;" align="left"> <div id="setlocation"></div></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">Comment History :</td><td style="width: 65%;" align="left"> <div style="color: blue;" onclick="getComentHistory()">View</div><div id="viewCmtHist"></div>	</td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">*&nbsp;Comment : </td><td style="width: 65%;" align="left"><textarea id="icomment"  rows="5" cols="100"></textarea></td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left">*&nbsp;Mail Id :</td><td style="width: 65%;" align="left"><input id="cmtrMail" name="cmtrMail" size="25" maxlength="20" >&nbsp;@capgemini.com</td></tr>
			<tr style="width: 100%"><td style="width: 35%;" align="left"></td><td style="width: 65%;" align="left"><input type="button" onclick="commentIdea()" value="Submit Comment"></td></tr>			
	</table>
	<input type="hidden" id="hidideaid" name="hidideaid"/>	
	</div>
</div>
            <!-- Start Pagination -->
			<!-- <span sec:authentication="principal.authorities" id="roleId" hidden="true">[ROLE_USER, ROLE_ADMIN]</span> -->
        	<div id="paginationDivID">
			    <nav aria-label="Page navigation">
			        <ul class="pagination" id="paginationId"></ul>
			    </nav>
			</div>
            <!-- End Pagination -->
          </div>
          <!-- End Blog Posts -->
		
          


          <!--Sidebar-->
          <aside id="sidebar" class="col-md-4 right-sidebar">
            <!-- Search Widget -->
            <div class="widget widget-search">
            <h5 class="widget-title">Search Hackathons</h5>
              <form action="#">
                <!-- <input class="form-control" type="search" placeholder="Start Searching..." /> -->
                <div id="searchCriteria">
                <div><input type="radio"  name="srccrta" id="srccrta" value="1" onclick="enableSearch(1)"/> By Vertical/Process</div>
                <div><input type="radio"  name="srccrta" id="srccrta" value="2" onclick="enableSearch(2)"/> By Solution Title</div>
                </div>
                <div id="verprcssearch" style="display: none;">
                 <select class="form-control" id="industry" name="industry">
                    <option value="NA">Select...</option>
                    <OPTION VALUE="BANKING">BANKING</OPTION>
                    <OPTION VALUE="INSURANCE">INSURANCE</OPTION>
                    <OPTION VALUE="HEALTHCARE">HEALTHCARE</OPTION>
                    <OPTION VALUE="TELECOM">TELECOM</OPTION>
                    <OPTION VALUE="EDUCATION">EDUCATION</OPTION>
                    <OPTION VALUE="MANUFACTURING">MANUFACTURING</OPTION>
                    <OPTION VALUE="TECHNOLOGY">TECHNOLOGY</OPTION>
                    <OPTION VALUE="MEDIA">MEDIA</OPTION>
                    <OPTION VALUE="FOOD AND BEVERAGE">FOOD AND BEVERAGE</OPTION>
                    <OPTION VALUE="ELECTRONICS">ELECTRONICS</OPTION>
                    <OPTION VALUE="FINANCIAL">FINANCIAL</OPTION>
                    <OPTION VALUE="LEGAL">LEGAL</OPTION>
                    <OPTION VALUE="AUTOMOTIVE">AUTOMOTIVE</OPTION>
                    <OPTION VALUE="GOVERNMENT">GOVERNMENT</OPTION>
                    <OPTION VALUE="ENGINEERING">ENGINEERING</OPTION>
                    <OPTION VALUE="CONSUMER">CONSUMER</OPTION>
                    <OPTION VALUE="MARKETING">MARKETING</OPTION>
                  </select>
                  
                   <select class="form-control" id="funcarea" name="funcarea">
                    <option value="NA">Select...</option>
                    <option value="HUMAN RESOURCE">HUMAN RESOURCE</option>
                    <option value="MARKETING">MARKETING</option>
                    <option value="PROMOTION">PROMOTION</option>
                    <option value="PRODUCTION">PRODUCTION</option>
                    <option value="SALES">SALES</option>
                    <option value="CUSTOMER SERVICE SUPPORT">CUSTOMER SERVICE SUPPORT</option>
                    <option value="ACCOUNTING AND FINANCE">ACCOUNTING AND FINANCE</option>
                    <option value="DISTRIBUTION">DISTRIBUTION</option>
                    <option value="RESEARCH AND DEVELOPMENT">RESEARCH AND DEVELOPMENT</option>
                    <option value="ADMINISTRATIVE AND MANAGEMENT">ADMINISTRATIVE AND MANAGEMENT</option>
                    <option value="OPERATIONS">OPERATIONS</option>
                    <option value="INFORMATION TECHNOLOGY SUPPORT">INFORMATION TECHNOLOGY SUPPORT</option>
                    <option value="PURCHASING">PURCHASING</option>
                    <option value="LEGAL DEPARTMENT">LEGAL DEPARTMENT</option>
                    </select>
               </div>
                 <div id="namesearch" style="display: none;">
                 <input class="form-control" type="text" placeholder="Solution Title..." id="namearea" />
                 </div>
                
                <a href="#" class="search-btn" onclick="searchIdeas()"><i class="fa fa-search"></i></a>
              </form>
            </div>            

            <!-- Popular Posts widget -->
            <div class="widget widget-popular-posts">
            <div id="postSearchDiv">  </div>
              <!-- <ul class="posts-list">
               
                 <li>
                  <div class="widget-thumb">
                    <a href="#"><img src="./assets/img/blog/p1.jpg" alt="" /></a>
                  </div>
                  <div class="widget-content">
                    <a href="#">Hackathon1</a>
                    <span><i class="icon-calendar"></i>2016/10/28</span>
                    <span><i class="icon-folder"></i>Banking</span>
                  </div>
                  <div class="clearfix"></div>
                </li>
              </ul> -->
            </div>

            <!-- Categories Widget -->
           <!--  <div class="widget widget-categories">
              <h5 class="widget-title">Categories</h5>
              <ul class="cat-list">
                <li>
                  <a href="#">Life Style</a>
                  <span class="num-posts">09</span>
                </li>
                <li>
                  <a href="#">Blog</a>
                  <span class="num-posts">15</span>
                </li>
                <li>
                  <a href="#">Fasion</a>
                  <span class="num-posts">21</span>
                </li>
                <li>
                  <a href="#">Sports</a>
                  <span class="num-posts">05</span>
                </li>
                <li>
                  <a href="#">Finance</a>
                  <span class="num-posts">29</span>
                </li>
                <li>
                  <a href="#">Political</a>
                  <span class="num-posts">17</span>
                </li>
              </ul>
            </div> -->
          </aside>
          <!--End sidebar-->
        </div>
      </div>
    </section>
    <!-- Blog Section End -->

    <!-- Footer Section Start -->   
    <footer class="section">  
      <div class="container">
        <div class="row">
          <div class="col-md-3 col-sm-3 col-xs-12">
           <h3><img src="./assets/img/cap-logo-footer.jpg" alt="" style="width: 200px;"></h3>
            <p>
              If you think you have the passion, 
              attitude and capability to join us 
              the next big software company
              s so that we can get the convers.
            </p>
          </div>
          <div class="col-md-3 col-sm-3 col-xs-12">
            <h3>Support</h3>
            <ul>
              <li><a href="#">Support</a></li>
              <li><a href="#">Docs</a></li>
              <li><a href="#">Contact Us</a></li>               
            </ul>
          </div>
          <div class="col-md-3 col-sm-3 col-xs-12">
            <h3>Learn More</h3>
            <ul>
              <li><a href="#">How it Works</a></li>
              <li><a href="ideaList">Ideas</a></li>
              <li><a href="#">Log In</a></li>
              <li><a href="#">Sign Up</a></li>
            </ul>
          </div>
          <div class="col-md-3 col-sm-3 col-xs-12">
            <h3>Quick Link</h3>
            <ul>
              <li><a href="#">Schedule</a></li>
              <li><a href="#">Gallery</a></li>
              <li><a href="#">Team</a></li>
              <li><a href="#">Blog</a></li>
              <li><a href="#">Submit Idea</a></li>
            </ul>
          </div>          
        </div>
      </div>      
    </footer>  
    <!-- Footer Section End -->  

    <!-- Copytight Start -->
    <section id="copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-12" >
            <p class="copyright-text text-center">
             ©Designed and Developed by 
              <a href="#">
                Hackathon Team
              </a>
            </p>
          </div>
        </div>
      </div>
    </section> 
    <!-- Copytight End -->   

    <!-- Go to Top Link -->
    <a href="#" class="back-to-top">
      <i class="icon-arrow-up"></i>
    </a>

    <div class="bottom"> <a href="#" class="settings"></a> </div>

    <!-- jQuery Load -->    
    <script src="./assets/js/jquery.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="./assets/js/bootstrap.min.js"></script> 
    <!-- Countdown Js -->
    <script src="./assets/js/jquery.countdown.min.js"></script>
    <!-- Smooth scroll JS -->   
    <script src="./assets/js/smooth-scroll.js"></script>        
    <!-- Wow Scroll -->
    <script src="./assets/js/wow.js"></script>
    <!-- Owl carousel -->
    <script src="./assets/js/owl.carousel.min.js"></script>
    <!-- Slicknav js -->
    <script src="./assets/js/jquery.slicknav.js"></script>
    <!--  Nivo lightbox Js -->
    <script src="./assets/js/nivo-lightbox.js"></script>   
    <!-- Contact Form Scripts -->
    <script src="./assets/js/form-validator.min.js"></script>  
    <script src="./assets/js/contact-form-script.js"></script>    
    <!--  Color Switcher js -->
    <!-- <script src="./assets/js/color-switcher.js"></script>  -->
    <!-- All Js plugin -->
    <script src="./assets/js/main.js"></script> 
    <!-- Map JS -->
    <script type="text/javascript" src="./assets/js/jquery.mapit.min.js"></script>
    <script src="./assets/js/initializers.js"></script>
    <script src="./assets/js/jquery.twbsPagination.min.js"></script>
    <script src="./js/moment.js"></script>
	<script src="./assets/js/jquery.rateyo.min.js"></script>
	<script type="text/javascript">
	var $pagination = $('#paginationId');
    var defaultOpts = {
        totalPages: 20
    };
    $pagination.twbsPagination(defaultOpts);
    $.ajax({url: "/ideaPages?page=1&size=5",
        	success: function (data) {
        	//alert(JSON.stringify(data.totalElements));
            var totalPages = data.totalPages;
            var currentPage = $pagination.twbsPagination('getCurrentPage');
            $pagination.twbsPagination('destroy');
            $pagination.twbsPagination($.extend({}, defaultOpts, {
                startPage: currentPage,
                totalPages: totalPages,
                onPageClick: function (event, page) {
                	$("html, body").animate({ scrollTop: 0 }, "slow");
                	var pagenum = Number(page)-1;
                	$.ajax({url: "/ideaPages?page="+pagenum+"&size=5",
                    	success: function (data) {
                    		$("#postdiv").html("");
                    		$.each(data.content, function (index, value) {
                    			var role = $("#roleId").text();
                    			var auth_sec = "sec:authorize=\"hasRole('ROLE_ADMIN')\"";
                        		$("#postdiv").append('<div class="blog-post"><div class="post-content"><h3 class="post-title"><a href="#">'+value.profile.capId+'<br>'+value.profile.capName+'</a></h3><div class="meta"><span class="meta-part"><a href="#" onclick="openDetails(\''+value.id+'\',\''+value.problem+'\',\''+value.industry+'\',\''+value.areaOfFunc+'\',\''+value.technology+'\',\''+value.solnTitle+'\',\''+value.solnDesc+'\',\''+value.buBenefit+'\',\''+value.status+'\',\''+value.rating+'\',\''+value.profile.capName+'\',\''+value.profile.capId+'\',\''+value.profile.capEmail+'\',\''+value.profile.phone+'\',\''+value.profile.buService+'\',\''+value.profile.project+'\',\''+value.profile.location+'\',\''+value.buInvest+'\',\''+value.buIncome+'\',\''+value.itype+'\')"><i class="icon-user"></i>Click for More...</a></span><span class="meta-part"><a href="#"><i class="icon-calendar"></i>'+moment(value.createdAt,"x").format("MMMM Do YYYY, h:mm:ss a")+'</a></span><span class="meta-part"><a href="#"><i class="icon-event"></i> Hackathon</a></span><span class="meta-part"><a href="#"><i class="icon-bubbles"></i> '+value.profile.capName+'</a></span></div><p>'+value.solnDesc+'.</p><div class="row"><div class="rateyo col-md-3 form-control" id="'+value.profile.capId+'S"></div><div class="col-md-2"><input class="form-control" id="'+value.profile.capId+'R" type="text" readonly="true"></div><div class="col-md-7"><div '+auth_sec+' class="col-md-6"><select class="form-control" id="'+value.profile.capId+'B" value="'+value.status+'"><option value="initial">Initial</option><option value="approve">Approve</option><option value="assign">Assign</option><option value="review">review</option><option value="publish">Publish</option><option value="reject">Reject</option><option value="onhold">On-Hold</option></select></div><div class="col-md-4"><input type="button" class="btn btn-success form-control" value="Update" onclick="rateIdea(\''+value.profile.capId+'\',\''+value.rating+'\',\''+value.status+'\')"></div><div class="col-md-2" style="padding-top:20px"><a href="/files/'+value.documentName+'"><i class="fa fa-download fa-2x" aria-hidden="true"></i></a></div></div></div></div></div>');
                        		if(role.indexOf("ROLE_ADMIN") === -1){
                        			$("#"+value.profile.capId+"B").attr('disabled',true);
                        		}
                        		$("#"+value.profile.capId+"S").rateYo({
                      	          rating: value.rating,
                      	          numStars: 5,
                      	          precision: 2,
                      	          minValue: 1,
                      	          maxValue: 5,
                                  onInit: function () {
                                	  $("#"+value.profile.capId+"R").val(value.rating);
                                	  if(value.status != "NA" || value.status != ""){
                                		  $("#"+value.profile.capId+"B").val(value.status);
                                	  }
                                }
                      	        }).on("rateyo.change", function (e, data) {
                      	        	$("#"+value.profile.capId+"R").val(data.rating);
                      	     });
                    		});
                    	}
                	});
                }
            }));
        }
    });
    function rateIdea(id, extRtng, extSts){
    	var token = $('#_csrf').attr('content');
    	var header = $('#_csrf_header').attr('content');
    	var data = {}
    	data["capId"] = id;
    	data["exRtng"] = extRtng;
    	data["extSts"] = extSts;
    	data["rating"] = $("#"+id+"R").val();
    	data["status"] = $("#"+id+"B").val();
    	
    	alert("--> "+data["status"]);
    	
/*     	$.post("/rateIdea", {
    		capId : id,
        	rating : $("#"+id+"R").val(),
        	status : $("#"+id+"B").val()
		}, function(data) {

			var json = JSON.parse(data);
			//...

		}).done(function() {
		}).fail(function(xhr, textStatus, errorThrown) {
		}).complete(function() {
			$("#btn-save").prop("disabled", false);

		}); */
    	
    	$.ajax({
            type: "POST",
            url: "/rateIdea",
            beforeSend: function(xhr) {
                xhr.setRequestHeader(header, token);
            },
            data: {
            	capId : id,
            	exRtng : extRtng,
            	extSts : extSts,
            	rating : $("#"+id+"R").val(),
            	status : $("#"+id+"B").val()
            },
            timeout: 600000,
            success: function (data, textStatus, xhr) {
            	if(xhr.status == 200){
            		alert("Review Successful");	
            	}
            },
            error: function (e, textStatus, xhr) {
            	alert(xhr.status);
            }
		});
    }
    
    
    
    function openDetails(data,data1,data2,data3,data4,data5,data6,data7,data8,data9,data10,data11,data12,data13,data14,data15,data16,data17,data18,data19){
    	
    	document.getElementById("setideaid").innerHTML = data;
    	document.getElementById("hidideaid").value = data;
    	document.getElementById("setprob").innerHTML = data1;
    	document.getElementById("setindustry").innerHTML = data2;
    	document.getElementById("setareaoffunc").innerHTML = data3;
    	document.getElementById("settech").innerHTML = data4;
    	document.getElementById("setsoltitle").innerHTML = data5;
    	document.getElementById("setsoldesc").innerHTML = data6;
    	document.getElementById("setbubenift").innerHTML = data7;
    	document.getElementById("setbuinvest").innerHTML = data17;
    	document.getElementById("setbuincome").innerHTML = data18;
    	document.getElementById("setstatus").innerHTML = data8;
    	document.getElementById("setrating").innerHTML = data9;
    	document.getElementById("setcapname").innerHTML = data10;
    	document.getElementById("setcapid").innerHTML = data11;
    	document.getElementById("setcapmail").innerHTML = data12;
    	document.getElementById("setphone").innerHTML = data13;
    	document.getElementById("setbuservice").innerHTML = data14;
    	document.getElementById("setproject").innerHTML = data15;
    	document.getElementById("setlocation").innerHTML = data16;
    	document.getElementById("setItype").innerHTML = data19;

    	
    	document.getElementById("detailsNav").style.width = "100%";
    	document.getElementById("detailsNav").style.display = "block";
    	
    	document.getElementById("headerdiv").style.display = "none";
    	document.getElementById("postdiv").style.display = "none";
    	document.getElementById("paginationDivID").style.display = "none";
    	
    }
    
    function getComentHistory(){
 		var id = document.getElementById("hidideaid").value;
     	var appstr = "<table>";
     	$.ajax({url: "/iComments/"+id,
         	success: function (data) {
         		for(var i=0;i<data.length;i++){
         			appstr += '<tr><td class="cmtClass">'+data[i].comment +'</td></tr><tr><td>(&nbsp;by : &nbsp;'+data[i].commentedBy+'&nbsp;)</td></tr>';
         		}
         		appstr+="</table>";
         		document.getElementById("viewCmtHist").innerHTML = appstr;
         		
         	},error: function (e) {
             	alert("Error in Comment History   "+e.error);
             }
     	});
     	
     }
     
     
     function enableSearch(val){
     	if(val == "1"){
     	document.getElementById("verprcssearch").style.display = "block";
     	document.getElementById("namesearch").style.display = "none";
     	}else if(val == "2"){
     	document.getElementById("namesearch").style.display = "block";
     	document.getElementById("verprcssearch").style.display = "none";
     	}
     }
     
     function searchIdeas(){
     	
     	var resturl = getSearchUrl();
     	if(resturl != "NA"){
     	var srchUrl = "/idea/search/"+resturl;
     	$.ajax({url: srchUrl,
         	success: function (valueAr) {
         		var totalSearchArea = '<ul class="posts-list">';
         		 for(var i=0;i<valueAr.length;i++){
         			var value = valueAr[i];
         			var formSearchArea = '<li><div class="widget-thumb"><div class="widget-thumb"><a href="#"><img src="./assets/img/blog/p1.jpg" alt="" /></a></div> <div class="widget-content">';
         			formSearchArea += '<a href="#" onclick="openDetails(\''+value.id+'\',\''+value.problem+'\',\''+value.industry+'\',\''+value.areaOfFunc+'\',\''+value.technology+'\',\''+value.solnTitle+'\',\''+value.solnDesc+'\',\''+value.buBenefit+'\',\''+value.status+'\',\''+value.rating+'\',\''+value.profile.capName+'\',\''+value.profile.capId+'\',\''+value.profile.capEmail+'\',\''+value.profile.phone+'\',\''+value.profile.buService+'\',\''+value.profile.project+'\',\''+value.profile.location+'\',\''+value.buInvest+'\',\''+value.buIncome+'\',\''+value.itype+'\')">'+value.solnTitle+'</a>';
         			formSearchArea += '</div><div class="clearfix"></div></li>';   
         			
         			totalSearchArea += formSearchArea;
         		}
         		 
         		 totalSearchArea += '</ul>';
         		 
         		 $("#postSearchDiv").html("");
         		 $("#postSearchDiv").append(totalSearchArea);
         		 
         		 totalSearchArea = "";formSearchArea = "";
         		 
         	},error: function (e) {
             	alert("Error in Searching   "+e.error);
             }
     	});
     	}
     }
     
     function getSearchUrl(){
     	
     	var radios = document.getElementsByName("srccrta");
     	var selOpt = "NA";
     	
     	for (var i = 0; i < radios.length; i++) {
     	    if (radios[i].checked) {
     	        selOpt = radios[i].value;
     	        break;
     	    }
     	}
     	
     	var url = "NA";
     	if(selOpt == "1"){
     		
    		var verid = document.getElementById("industry").value;
        	var funid = document.getElementById("funcarea").value;
     		
     	if(verid != "NA" && funid == "NA"){
     		url = "vertical/"+verid;
     	}else if(funid != "NA" && verid == "NA"){
     		url = "process/"+funid;
     	}else if(verid != "NA" && funid != "NA"){
     		url = "verprocs/"+verid+"/"+funid;
     	}
     	}else if(selOpt == "2" && soltitl != ""){
     		var soltitl = document.getElementById("namearea").value;
     		url = "soltitle/"+soltitl;
     	}
     	
     	return url;
     }
    
    function closeDetails(){
    	document.getElementById("detailsNav").style.width = "0%";
    	document.getElementById("detailsNav").style.display = "none";
    	
    	document.getElementById("headerdiv").style.display = "block";
    	document.getElementById("postdiv").style.display = "block";
    	document.getElementById("paginationDivID").style.display = "block";
    	
    	document.getElementById("viewCmtHist").innerHTML = "";
    }
    
    function commentIdea(){
    	var token = $('#_csrf').attr('content');
    	var header = $('#_csrf_header').attr('content');
    	var comment = $.trim($("#icomment").val());
    	var ideaId = $("#setideaid").text();
    	var cmtBy = $.trim($("#cmtrMail").val());
    	if((comment != '' && comment != null) || (cmtBy != '' && cmtBy != null)){
    		$.ajax({
                type: "POST",
                url: "/commentIdea",
                beforeSend: function(xhr) {
                    xhr.setRequestHeader(header, token);
                },
                data: {
                	ideaId:ideaId,
                	comment:comment,
                	commentedBy:cmtBy
                },
                timeout: 600000,
                success: function (data, textStatus, xhr) {
                	if(xhr.status == 200){
                		alert("Comment Successful");
                		$("#icomment").val('');
                	}
                },
                error: function (e, textStatus, xhr) {
                	alert(xhr.status);
                }
    		});
    	}else{
    		alert("Please fill out the mandatory fields indicated with * ");
    	}
    }
    
    
    
	</script>
  </body>
